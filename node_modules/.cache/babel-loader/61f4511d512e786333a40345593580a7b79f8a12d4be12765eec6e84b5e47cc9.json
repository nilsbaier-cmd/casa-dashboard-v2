{"ast":null,"code":"import { SphereGeometry, Color, TextureLoader, SRGBColorSpace, MeshBasicMaterial, BackSide, Vector2, WebGLRenderer, Mesh, Clock, PerspectiveCamera, Scene, Raycaster, Vector3, Box3 } from 'three';\nimport { WebGPURenderer } from 'three/webgpu';\nimport { TrackballControls } from 'three/examples/jsm/controls/TrackballControls.js';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\nimport { FlyControls } from 'three/examples/jsm/controls/FlyControls.js';\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer.js';\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass.js';\nimport { parseToRgb, opacify } from 'polished';\nimport { Group, Tween, Easing } from '@tweenjs/tween.js';\nimport accessorFn from 'accessor-fn';\nimport Kapsule from 'kapsule';\nimport Tooltip from 'float-tooltip';\nfunction styleInject(css, ref) {\n  if (ref === void 0) ref = {};\n  var insertAt = ref.insertAt;\n  if (typeof document === 'undefined') {\n    return;\n  }\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\nvar css_248z = \".scene-nav-info {\\n  position: absolute;\\n  bottom: 5px;\\n  width: 100%;\\n  text-align: center;\\n  color: slategrey;\\n  opacity: 0.7;\\n  font-size: 10px;\\n  font-family: sans-serif;\\n  pointer-events: none;\\n  user-select: none;\\n}\\n\\n.scene-container canvas:focus {\\n  outline: none;\\n}\";\nstyleInject(css_248z);\nfunction _arrayLikeToArray(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\nfunction _arrayWithHoles(r) {\n  if (Array.isArray(r)) return r;\n}\nfunction _arrayWithoutHoles(r) {\n  if (Array.isArray(r)) return _arrayLikeToArray(r);\n}\nfunction _defineProperty(e, r, t) {\n  return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: true,\n    configurable: true,\n    writable: true\n  }) : e[r] = t, e;\n}\nfunction _iterableToArray(r) {\n  if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r);\n}\nfunction _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = true,\n      o = false;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) ;else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = true, n = r;\n    } finally {\n      try {\n        if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _slicedToArray(r, e) {\n  return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest();\n}\nfunction _toConsumableArray(r) {\n  return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread();\n}\nfunction _toPrimitive(t, r) {\n  if (\"object\" != typeof t || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r);\n    if (\"object\" != typeof i) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nfunction _toPropertyKey(t) {\n  var i = _toPrimitive(t, \"string\");\n  return \"symbol\" == typeof i ? i : i + \"\";\n}\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return _arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0;\n  }\n}\nvar three = window.THREE ? window.THREE // Prefer consumption from global THREE, if exists\n: {\n  WebGLRenderer: WebGLRenderer,\n  Scene: Scene,\n  PerspectiveCamera: PerspectiveCamera,\n  Raycaster: Raycaster,\n  SRGBColorSpace: SRGBColorSpace,\n  TextureLoader: TextureLoader,\n  Vector2: Vector2,\n  Vector3: Vector3,\n  Box3: Box3,\n  Color: Color,\n  Mesh: Mesh,\n  SphereGeometry: SphereGeometry,\n  MeshBasicMaterial: MeshBasicMaterial,\n  BackSide: BackSide,\n  Clock: Clock\n};\nvar threeRenderObjects = Kapsule({\n  props: {\n    width: {\n      \"default\": window.innerWidth,\n      onChange: function onChange(width, state, prevWidth) {\n        isNaN(width) && (state.width = prevWidth);\n      }\n    },\n    height: {\n      \"default\": window.innerHeight,\n      onChange: function onChange(height, state, prevHeight) {\n        isNaN(height) && (state.height = prevHeight);\n      }\n    },\n    viewOffset: {\n      \"default\": [0, 0]\n    },\n    backgroundColor: {\n      \"default\": '#000011'\n    },\n    backgroundImageUrl: {},\n    onBackgroundImageLoaded: {},\n    showNavInfo: {\n      \"default\": true\n    },\n    skyRadius: {\n      \"default\": 50000\n    },\n    objects: {\n      \"default\": []\n    },\n    lights: {\n      \"default\": []\n    },\n    enablePointerInteraction: {\n      \"default\": true,\n      onChange: function onChange(_, state) {\n        // Reset hover state\n        state.hoverObj = null;\n        state.tooltip && state.tooltip.content(null);\n      },\n      triggerUpdate: false\n    },\n    pointerRaycasterThrottleMs: {\n      \"default\": 50,\n      triggerUpdate: false\n    },\n    lineHoverPrecision: {\n      \"default\": 1,\n      triggerUpdate: false\n    },\n    pointsHoverPrecision: {\n      \"default\": 1,\n      triggerUpdate: false\n    },\n    hoverOrderComparator: {\n      triggerUpdate: false\n    },\n    // keep existing order by default\n    hoverFilter: {\n      \"default\": function _default() {\n        return true;\n      },\n      triggerUpdate: false\n    },\n    // exclude objects from interaction\n    tooltipContent: {\n      triggerUpdate: false\n    },\n    hoverDuringDrag: {\n      \"default\": false,\n      triggerUpdate: false\n    },\n    clickAfterDrag: {\n      \"default\": false,\n      triggerUpdate: false\n    },\n    onHover: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onRightClick: {\n      triggerUpdate: false\n    }\n  },\n  methods: {\n    tick: function tick(state) {\n      if (state.initialised) {\n        state.controls.enabled && state.controls.update && state.controls.update(Math.min(1, state.clock.getDelta())); // timedelta is required for fly controls\n\n        state.postProcessingComposer ? state.postProcessingComposer.render() // if using postprocessing, switch the output to it\n        : state.renderer.render(state.scene, state.camera);\n        state.extraRenderers.forEach(function (r) {\n          return r.render(state.scene, state.camera);\n        });\n        var now = +new Date();\n        if (state.enablePointerInteraction && now - state.lastRaycasterCheck >= state.pointerRaycasterThrottleMs) {\n          state.lastRaycasterCheck = now;\n          // Update tooltip and trigger onHover events\n          var topObject = null;\n          if (state.hoverDuringDrag || !state.isPointerDragging) {\n            var intersects = this.intersectingObjects(state.pointerPos.x, state.pointerPos.y);\n            state.hoverOrderComparator && intersects.sort(function (a, b) {\n              return state.hoverOrderComparator(a.object, b.object);\n            });\n            var topIntersect = intersects.find(function (d) {\n              return state.hoverFilter(d.object);\n            }) || null;\n            topObject = topIntersect ? topIntersect.object : null;\n            state.intersection = topIntersect || null;\n          }\n          if (topObject !== state.hoverObj) {\n            state.onHover(topObject, state.hoverObj, state.intersection);\n            state.tooltip.content(topObject ? accessorFn(state.tooltipContent)(topObject, state.intersection) || null : null);\n            state.hoverObj = topObject;\n          }\n        }\n        state.tweenGroup.update(); // update camera animation tweens\n      }\n      return this;\n    },\n    getPointerPos: function getPointerPos(state) {\n      var _state$pointerPos = state.pointerPos,\n        x = _state$pointerPos.x,\n        y = _state$pointerPos.y;\n      return {\n        x: x,\n        y: y\n      };\n    },\n    cameraPosition: function cameraPosition(state, position, lookAt, transitionDuration) {\n      var camera = state.camera;\n\n      // Setter\n      if (position && state.initialised) {\n        var finalPos = position;\n        var finalLookAt = lookAt || {\n          x: 0,\n          y: 0,\n          z: 0\n        };\n        if (!transitionDuration) {\n          // no animation\n          setCameraPos(finalPos);\n          setLookAt(finalLookAt);\n        } else {\n          var camPos = Object.assign({}, camera.position);\n          var camLookAt = getLookAt();\n          state.tweenGroup.add(new Tween(camPos).to(finalPos, transitionDuration).easing(Easing.Quadratic.Out).onUpdate(setCameraPos).start());\n\n          // Face direction in 1/3rd of time\n          state.tweenGroup.add(new Tween(camLookAt).to(finalLookAt, transitionDuration / 3).easing(Easing.Quadratic.Out).onUpdate(setLookAt).start());\n        }\n        return this;\n      }\n\n      // Getter\n      return Object.assign({}, camera.position, {\n        lookAt: getLookAt()\n      });\n\n      //\n\n      function setCameraPos(pos) {\n        var x = pos.x,\n          y = pos.y,\n          z = pos.z;\n        if (x !== undefined) camera.position.x = x;\n        if (y !== undefined) camera.position.y = y;\n        if (z !== undefined) camera.position.z = z;\n      }\n      function setLookAt(lookAt) {\n        var lookAtVect = new three.Vector3(lookAt.x, lookAt.y, lookAt.z);\n        if (state.controls.enabled && state.controls.target) {\n          state.controls.target = lookAtVect;\n        } else {\n          // Fly controls doesn't have target attribute\n          camera.lookAt(lookAtVect); // note: lookAt may be overridden by other controls in some cases\n        }\n      }\n      function getLookAt() {\n        return Object.assign(new three.Vector3(0, 0, -1e3).applyQuaternion(camera.quaternion).add(camera.position));\n      }\n    },\n    zoomToFit: function zoomToFit(state) {\n      var transitionDuration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var padding = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;\n      for (var _len = arguments.length, bboxArgs = new Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n        bboxArgs[_key - 3] = arguments[_key];\n      }\n      return this.fitToBbox(this.getBbox.apply(this, bboxArgs), transitionDuration, padding);\n    },\n    fitToBbox: function fitToBbox(state, bbox) {\n      var transitionDuration = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var padding = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 10;\n      // based on https://discourse.threejs.org/t/camera-zoom-to-fit-object/936/24\n      var camera = state.camera;\n      if (bbox) {\n        var center = new three.Vector3(0, 0, 0); // reset camera aim to center\n        var maxBoxSide = Math.max.apply(Math, _toConsumableArray(Object.entries(bbox).map(function (_ref) {\n          var _ref2 = _slicedToArray(_ref, 2),\n            coordType = _ref2[0],\n            coords = _ref2[1];\n          return Math.max.apply(Math, _toConsumableArray(coords.map(function (c) {\n            return Math.abs(center[coordType] - c);\n          })));\n        }))) * 2;\n\n        // find distance that fits whole bbox within padded fov\n        var paddedFov = (1 - padding * 2 / state.height) * camera.fov;\n        var fitHeightDistance = maxBoxSide / Math.atan(paddedFov * Math.PI / 180);\n        var fitWidthDistance = fitHeightDistance / camera.aspect;\n        var distance = Math.max(fitHeightDistance, fitWidthDistance);\n        if (distance > 0) {\n          var newCameraPosition = center.clone().sub(camera.position).normalize().multiplyScalar(-distance);\n          this.cameraPosition(newCameraPosition, center, transitionDuration);\n        }\n      }\n      return this;\n    },\n    getBbox: function getBbox(state) {\n      var objFilter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {\n        return true;\n      };\n      var box = new three.Box3(new three.Vector3(0, 0, 0), new three.Vector3(0, 0, 0));\n      var objs = state.objects.filter(objFilter);\n      if (!objs.length) return null;\n      objs.forEach(function (obj) {\n        return box.expandByObject(obj);\n      });\n\n      // extract global x,y,z min/max\n      return Object.assign.apply(Object, _toConsumableArray(['x', 'y', 'z'].map(function (c) {\n        return _defineProperty({}, c, [box.min[c], box.max[c]]);\n      })));\n    },\n    getScreenCoords: function getScreenCoords(state, x, y, z) {\n      var vec = new three.Vector3(x, y, z);\n      vec.project(this.camera()); // project to the camera plane\n      return {\n        // align relative pos to canvas dimensions\n        x: (vec.x + 1) * state.width / 2,\n        y: -(vec.y - 1) * state.height / 2\n      };\n    },\n    getSceneCoords: function getSceneCoords(state, screenX, screenY) {\n      var distance = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var relCoords = new three.Vector2(screenX / state.width * 2 - 1, -(screenY / state.height) * 2 + 1);\n      var raycaster = new three.Raycaster();\n      raycaster.setFromCamera(relCoords, state.camera);\n      return Object.assign({}, raycaster.ray.at(distance, new three.Vector3()));\n    },\n    intersectingObjects: function intersectingObjects(state, x, y) {\n      var relCoords = new three.Vector2(x / state.width * 2 - 1, -(y / state.height) * 2 + 1);\n      var raycaster = new three.Raycaster();\n      raycaster.params.Line.threshold = state.lineHoverPrecision; // set linePrecision\n      raycaster.params.Points.threshold = state.pointsHoverPrecision; // set pointsPrecision\n      raycaster.setFromCamera(relCoords, state.camera);\n      return raycaster.intersectObjects(state.objects, true);\n    },\n    renderer: function renderer(state) {\n      return state.renderer;\n    },\n    scene: function scene(state) {\n      return state.scene;\n    },\n    camera: function camera(state) {\n      return state.camera;\n    },\n    postProcessingComposer: function postProcessingComposer(state) {\n      return state.postProcessingComposer;\n    },\n    controls: function controls(state) {\n      return state.controls;\n    },\n    tbControls: function tbControls(state) {\n      return state.controls;\n    } // to be deprecated\n  },\n  stateInit: function stateInit() {\n    return {\n      scene: new three.Scene(),\n      camera: new three.PerspectiveCamera(),\n      clock: new three.Clock(),\n      tweenGroup: new Group(),\n      lastRaycasterCheck: 0\n    };\n  },\n  init: function init(domNode, state) {\n    var _ref4 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n      _ref4$controlType = _ref4.controlType,\n      controlType = _ref4$controlType === void 0 ? 'trackball' : _ref4$controlType,\n      _ref4$useWebGPU = _ref4.useWebGPU,\n      useWebGPU = _ref4$useWebGPU === void 0 ? false : _ref4$useWebGPU,\n      _ref4$rendererConfig = _ref4.rendererConfig,\n      rendererConfig = _ref4$rendererConfig === void 0 ? {} : _ref4$rendererConfig,\n      _ref4$extraRenderers = _ref4.extraRenderers,\n      extraRenderers = _ref4$extraRenderers === void 0 ? [] : _ref4$extraRenderers,\n      _ref4$waitForLoadComp = _ref4.waitForLoadComplete,\n      waitForLoadComplete = _ref4$waitForLoadComp === void 0 ? true : _ref4$waitForLoadComp;\n    // Wipe DOM\n    domNode.innerHTML = '';\n\n    // Add relative container\n    domNode.appendChild(state.container = document.createElement('div'));\n    state.container.className = 'scene-container';\n    state.container.style.position = 'relative';\n\n    // Add nav info section\n    state.container.appendChild(state.navInfo = document.createElement('div'));\n    state.navInfo.className = 'scene-nav-info';\n    state.navInfo.textContent = {\n      orbit: 'Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan',\n      trackball: 'Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan',\n      fly: 'WASD: move, R|F: up | down, Q|E: roll, up|down: pitch, left|right: yaw'\n    }[controlType] || '';\n    state.navInfo.style.display = state.showNavInfo ? null : 'none';\n\n    // Setup tooltip\n    state.tooltip = new Tooltip(state.container);\n\n    // Capture pointer coords on move or touchstart\n    state.pointerPos = new three.Vector2();\n    state.pointerPos.x = -2; // Initialize off canvas\n    state.pointerPos.y = -2;\n    ['pointermove', 'pointerdown'].forEach(function (evType) {\n      return state.container.addEventListener(evType, function (ev) {\n        // track click state\n        evType === 'pointerdown' && (state.isPointerPressed = true);\n\n        // detect point drag\n        !state.isPointerDragging && ev.type === 'pointermove' && (ev.pressure > 0 || state.isPointerPressed) // ev.pressure always 0 on Safari, so we used the isPointerPressed tracker\n        && (ev.pointerType === 'mouse' || ev.movementX === undefined || [ev.movementX, ev.movementY].some(function (m) {\n          return Math.abs(m) > 1;\n        })) // relax drag trigger sensitivity on non-mouse (touch/pen) events\n        && (state.isPointerDragging = true);\n        if (state.enablePointerInteraction) {\n          // update the pointer pos\n          var offset = getOffset(state.container);\n          state.pointerPos.x = ev.pageX - offset.left;\n          state.pointerPos.y = ev.pageY - offset.top;\n        }\n        function getOffset(el) {\n          var rect = el.getBoundingClientRect(),\n            scrollLeft = window.pageXOffset || document.documentElement.scrollLeft,\n            scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n          return {\n            top: rect.top + scrollTop,\n            left: rect.left + scrollLeft\n          };\n        }\n      }, {\n        passive: true\n      });\n    });\n\n    // Handle click events on objs\n    state.container.addEventListener('pointerup', function (ev) {\n      if (!state.isPointerPressed) return; // don't trigger click events if pointer is not pressed on the canvas\n\n      state.isPointerPressed = false;\n      if (state.isPointerDragging) {\n        state.isPointerDragging = false;\n        if (!state.clickAfterDrag) return; // don't trigger onClick after pointer drag (camera motion via controls)\n      }\n      requestAnimationFrame(function () {\n        // trigger click events asynchronously, to allow hoverObj to be set (on frame)\n        if (ev.button === 0) {\n          // left-click\n          state.onClick(state.hoverObj || null, ev, state.intersection); // trigger background clicks with null\n        }\n        if (ev.button === 2 && state.onRightClick) {\n          // right-click\n          state.onRightClick(state.hoverObj || null, ev, state.intersection);\n        }\n      });\n    }, {\n      passive: true,\n      capture: true\n    }); // use capture phase to prevent propagation blocking from controls (specifically for fly)\n\n    state.container.addEventListener('contextmenu', function (ev) {\n      if (state.onRightClick) ev.preventDefault(); // prevent default contextmenu behavior and allow pointerup to fire instead\n    });\n\n    // Setup renderer, camera and controls\n    state.renderer = new (useWebGPU ? WebGPURenderer : three.WebGLRenderer)(Object.assign({\n      antialias: true,\n      alpha: true\n    }, rendererConfig));\n    state.renderer.setPixelRatio(Math.min(2, window.devicePixelRatio)); // clamp device pixel ratio\n    state.container.appendChild(state.renderer.domElement);\n\n    // Setup extra renderers\n    state.extraRenderers = extraRenderers;\n    state.extraRenderers.forEach(function (r) {\n      // overlay them on top of main renderer\n      r.domElement.style.position = 'absolute';\n      r.domElement.style.top = '0px';\n      r.domElement.style.pointerEvents = 'none';\n      state.container.appendChild(r.domElement);\n    });\n\n    // configure post-processing composer\n    state.postProcessingComposer = new EffectComposer(state.renderer);\n    state.postProcessingComposer.addPass(new RenderPass(state.scene, state.camera)); // render scene as first pass\n\n    // configure controls\n    state.controls = new {\n      trackball: TrackballControls,\n      orbit: OrbitControls,\n      fly: FlyControls\n    }[controlType](state.camera, state.renderer.domElement);\n    if (controlType === 'fly') {\n      state.controls.movementSpeed = 300;\n      state.controls.rollSpeed = Math.PI / 6;\n      state.controls.dragToLook = true;\n    }\n    if (controlType === 'trackball' || controlType === 'orbit') {\n      state.controls.minDistance = 0.1;\n      state.controls.maxDistance = state.skyRadius;\n      state.controls.addEventListener('start', function () {\n        state.controlsEngaged = true;\n      });\n      state.controls.addEventListener('change', function () {\n        if (state.controlsEngaged) {\n          state.controlsDragging = true;\n        }\n      });\n      state.controls.addEventListener('end', function () {\n        state.controlsEngaged = false;\n        state.controlsDragging = false;\n      });\n    }\n    [state.renderer, state.postProcessingComposer].concat(_toConsumableArray(state.extraRenderers)).forEach(function (r) {\n      return r.setSize(state.width, state.height);\n    });\n    state.camera.aspect = state.width / state.height;\n    state.camera.updateProjectionMatrix();\n    state.camera.position.z = 1000;\n\n    // add sky\n    state.scene.add(state.skysphere = new three.Mesh());\n    state.skysphere.visible = false;\n    state.loadComplete = state.scene.visible = !waitForLoadComplete;\n    window.scene = state.scene;\n  },\n  update: function update(state, changedProps) {\n    // resize canvas\n    if (state.width && state.height && (changedProps.hasOwnProperty('width') || changedProps.hasOwnProperty('height'))) {\n      var _state$camera;\n      var w = state.width;\n      var h = state.height;\n      state.container.style.width = \"\".concat(w, \"px\");\n      state.container.style.height = \"\".concat(h, \"px\");\n      [state.renderer, state.postProcessingComposer].concat(_toConsumableArray(state.extraRenderers)).forEach(function (r) {\n        return r.setSize(w, h);\n      });\n      state.camera.aspect = w / h;\n      var o = state.viewOffset.slice(0, 2);\n      o.some(function (n) {\n        return n;\n      }) && (_state$camera = state.camera).setViewOffset.apply(_state$camera, [w, h].concat(_toConsumableArray(o), [w, h]));\n      state.camera.updateProjectionMatrix();\n    }\n    if (changedProps.hasOwnProperty('viewOffset')) {\n      var _state$camera2;\n      var _w = state.width;\n      var _h = state.height;\n      var _o = state.viewOffset.slice(0, 2);\n      _o.some(function (n) {\n        return n;\n      }) ? (_state$camera2 = state.camera).setViewOffset.apply(_state$camera2, [_w, _h].concat(_toConsumableArray(_o), [_w, _h])) : state.camera.clearViewOffset();\n    }\n    if (changedProps.hasOwnProperty('skyRadius') && state.skyRadius) {\n      state.controls.hasOwnProperty('maxDistance') && changedProps.skyRadius && (state.controls.maxDistance = Math.min(state.controls.maxDistance, state.skyRadius));\n      state.camera.far = state.skyRadius * 2.5;\n      state.camera.updateProjectionMatrix();\n      state.skysphere.geometry = new three.SphereGeometry(state.skyRadius);\n    }\n    if (changedProps.hasOwnProperty('backgroundColor')) {\n      var alpha = parseToRgb(state.backgroundColor).alpha;\n      if (alpha === undefined) alpha = 1;\n      state.renderer.setClearColor(new three.Color(opacify(1, state.backgroundColor)), alpha);\n    }\n    if (changedProps.hasOwnProperty('backgroundImageUrl')) {\n      if (!state.backgroundImageUrl) {\n        state.skysphere.visible = false;\n        state.skysphere.material.map = null;\n        !state.loadComplete && finishLoad();\n      } else {\n        new three.TextureLoader().load(state.backgroundImageUrl, function (texture) {\n          texture.colorSpace = three.SRGBColorSpace;\n          state.skysphere.material = new three.MeshBasicMaterial({\n            map: texture,\n            side: three.BackSide\n          });\n          state.skysphere.visible = true;\n\n          // triggered when background image finishes loading (asynchronously to allow 1 frame to load texture)\n          state.onBackgroundImageLoaded && setTimeout(state.onBackgroundImageLoaded);\n          !state.loadComplete && finishLoad();\n        });\n      }\n    }\n    changedProps.hasOwnProperty('showNavInfo') && (state.navInfo.style.display = state.showNavInfo ? null : 'none');\n    if (changedProps.hasOwnProperty('lights')) {\n      (changedProps.lights || []).forEach(function (light) {\n        return state.scene.remove(light);\n      }); // Clear the place\n      state.lights.forEach(function (light) {\n        return state.scene.add(light);\n      }); // Add to scene\n    }\n    if (changedProps.hasOwnProperty('objects')) {\n      (changedProps.objects || []).forEach(function (obj) {\n        return state.scene.remove(obj);\n      }); // Clear the place\n      state.objects.forEach(function (obj) {\n        return state.scene.add(obj);\n      }); // Add to scene\n    }\n\n    //\n\n    function finishLoad() {\n      state.loadComplete = state.scene.visible = true;\n    }\n  }\n});\nexport { threeRenderObjects as default };","map":{"version":3,"names":["SphereGeometry","Color","TextureLoader","SRGBColorSpace","MeshBasicMaterial","BackSide","Vector2","WebGLRenderer","Mesh","Clock","PerspectiveCamera","Scene","Raycaster","Vector3","Box3","WebGPURenderer","TrackballControls","OrbitControls","FlyControls","EffectComposer","RenderPass","parseToRgb","opacify","Group","Tween","Easing","accessorFn","Kapsule","Tooltip","styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","css_248z","_arrayLikeToArray","r","a","length","e","n","Array","_arrayWithHoles","isArray","_arrayWithoutHoles","_defineProperty","t","_toPropertyKey","Object","defineProperty","value","enumerable","configurable","writable","_iterableToArray","Symbol","iterator","from","_iterableToArrayLimit","l","i","u","f","o","call","next","done","push","return","_nonIterableRest","TypeError","_nonIterableSpread","_slicedToArray","_unsupportedIterableToArray","_toConsumableArray","_toPrimitive","toPrimitive","String","Number","toString","slice","constructor","name","test","three","window","THREE","threeRenderObjects","props","width","innerWidth","onChange","state","prevWidth","isNaN","height","innerHeight","prevHeight","viewOffset","backgroundColor","backgroundImageUrl","onBackgroundImageLoaded","showNavInfo","skyRadius","objects","lights","enablePointerInteraction","_","hoverObj","tooltip","content","triggerUpdate","pointerRaycasterThrottleMs","lineHoverPrecision","pointsHoverPrecision","hoverOrderComparator","hoverFilter","_default","tooltipContent","hoverDuringDrag","clickAfterDrag","onHover","onClick","onRightClick","methods","tick","initialised","controls","enabled","update","Math","min","clock","getDelta","postProcessingComposer","render","renderer","scene","camera","extraRenderers","forEach","now","Date","lastRaycasterCheck","topObject","isPointerDragging","intersects","intersectingObjects","pointerPos","x","y","sort","b","object","topIntersect","find","d","intersection","tweenGroup","getPointerPos","_state$pointerPos","cameraPosition","position","lookAt","transitionDuration","finalPos","finalLookAt","z","setCameraPos","setLookAt","camPos","assign","camLookAt","getLookAt","add","to","easing","Quadratic","Out","onUpdate","start","pos","undefined","lookAtVect","target","applyQuaternion","quaternion","zoomToFit","arguments","padding","_len","bboxArgs","_key","fitToBbox","getBbox","apply","bbox","center","maxBoxSide","max","entries","map","_ref","_ref2","coordType","coords","c","abs","paddedFov","fov","fitHeightDistance","atan","PI","fitWidthDistance","aspect","distance","newCameraPosition","clone","sub","normalize","multiplyScalar","objFilter","box","objs","filter","obj","expandByObject","getScreenCoords","vec","project","getSceneCoords","screenX","screenY","relCoords","raycaster","setFromCamera","ray","at","params","Line","threshold","Points","intersectObjects","tbControls","stateInit","init","domNode","_ref4","_ref4$controlType","controlType","_ref4$useWebGPU","useWebGPU","_ref4$rendererConfig","rendererConfig","_ref4$extraRenderers","_ref4$waitForLoadComp","waitForLoadComplete","innerHTML","container","className","navInfo","textContent","orbit","trackball","fly","display","evType","addEventListener","ev","isPointerPressed","pressure","pointerType","movementX","movementY","some","m","offset","getOffset","pageX","left","pageY","top","el","rect","getBoundingClientRect","scrollLeft","pageXOffset","documentElement","scrollTop","pageYOffset","passive","requestAnimationFrame","button","capture","preventDefault","antialias","alpha","setPixelRatio","devicePixelRatio","domElement","pointerEvents","addPass","movementSpeed","rollSpeed","dragToLook","minDistance","maxDistance","controlsEngaged","controlsDragging","concat","setSize","updateProjectionMatrix","skysphere","visible","loadComplete","changedProps","hasOwnProperty","_state$camera","w","h","setViewOffset","_state$camera2","_w","_h","_o","clearViewOffset","far","geometry","setClearColor","material","finishLoad","load","texture","colorSpace","side","setTimeout","light","remove","default"],"sources":["/Users/Nils_1/Downloads/casa-react-v2/node_modules/globe.gl/node_modules/three-render-objects/dist/three-render-objects.mjs"],"sourcesContent":["import { SphereGeometry, Color, TextureLoader, SRGBColorSpace, MeshBasicMaterial, BackSide, Vector2, WebGLRenderer, Mesh, Clock, PerspectiveCamera, Scene, Raycaster, Vector3, Box3 } from 'three';\nimport { WebGPURenderer } from 'three/webgpu';\nimport { TrackballControls } from 'three/examples/jsm/controls/TrackballControls.js';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\nimport { FlyControls } from 'three/examples/jsm/controls/FlyControls.js';\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer.js';\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass.js';\nimport { parseToRgb, opacify } from 'polished';\nimport { Group, Tween, Easing } from '@tweenjs/tween.js';\nimport accessorFn from 'accessor-fn';\nimport Kapsule from 'kapsule';\nimport Tooltip from 'float-tooltip';\n\nfunction styleInject(css, ref) {\n  if (ref === void 0) ref = {};\n  var insertAt = ref.insertAt;\n  if (typeof document === 'undefined') {\n    return;\n  }\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css_248z = \".scene-nav-info {\\n  position: absolute;\\n  bottom: 5px;\\n  width: 100%;\\n  text-align: center;\\n  color: slategrey;\\n  opacity: 0.7;\\n  font-size: 10px;\\n  font-family: sans-serif;\\n  pointer-events: none;\\n  user-select: none;\\n}\\n\\n.scene-container canvas:focus {\\n  outline: none;\\n}\";\nstyleInject(css_248z);\n\nfunction _arrayLikeToArray(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\nfunction _arrayWithHoles(r) {\n  if (Array.isArray(r)) return r;\n}\nfunction _arrayWithoutHoles(r) {\n  if (Array.isArray(r)) return _arrayLikeToArray(r);\n}\nfunction _defineProperty(e, r, t) {\n  return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: true,\n    configurable: true,\n    writable: true\n  }) : e[r] = t, e;\n}\nfunction _iterableToArray(r) {\n  if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r);\n}\nfunction _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = true,\n      o = false;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) ; else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = true, n = r;\n    } finally {\n      try {\n        if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _slicedToArray(r, e) {\n  return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest();\n}\nfunction _toConsumableArray(r) {\n  return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread();\n}\nfunction _toPrimitive(t, r) {\n  if (\"object\" != typeof t || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r);\n    if (\"object\" != typeof i) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nfunction _toPropertyKey(t) {\n  var i = _toPrimitive(t, \"string\");\n  return \"symbol\" == typeof i ? i : i + \"\";\n}\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return _arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0;\n  }\n}\n\nvar three = window.THREE ? window.THREE // Prefer consumption from global THREE, if exists\n: {\n  WebGLRenderer: WebGLRenderer,\n  Scene: Scene,\n  PerspectiveCamera: PerspectiveCamera,\n  Raycaster: Raycaster,\n  SRGBColorSpace: SRGBColorSpace,\n  TextureLoader: TextureLoader,\n  Vector2: Vector2,\n  Vector3: Vector3,\n  Box3: Box3,\n  Color: Color,\n  Mesh: Mesh,\n  SphereGeometry: SphereGeometry,\n  MeshBasicMaterial: MeshBasicMaterial,\n  BackSide: BackSide,\n  Clock: Clock\n};\nvar threeRenderObjects = Kapsule({\n  props: {\n    width: {\n      \"default\": window.innerWidth,\n      onChange: function onChange(width, state, prevWidth) {\n        isNaN(width) && (state.width = prevWidth);\n      }\n    },\n    height: {\n      \"default\": window.innerHeight,\n      onChange: function onChange(height, state, prevHeight) {\n        isNaN(height) && (state.height = prevHeight);\n      }\n    },\n    viewOffset: {\n      \"default\": [0, 0]\n    },\n    backgroundColor: {\n      \"default\": '#000011'\n    },\n    backgroundImageUrl: {},\n    onBackgroundImageLoaded: {},\n    showNavInfo: {\n      \"default\": true\n    },\n    skyRadius: {\n      \"default\": 50000\n    },\n    objects: {\n      \"default\": []\n    },\n    lights: {\n      \"default\": []\n    },\n    enablePointerInteraction: {\n      \"default\": true,\n      onChange: function onChange(_, state) {\n        // Reset hover state\n        state.hoverObj = null;\n        state.tooltip && state.tooltip.content(null);\n      },\n      triggerUpdate: false\n    },\n    pointerRaycasterThrottleMs: {\n      \"default\": 50,\n      triggerUpdate: false\n    },\n    lineHoverPrecision: {\n      \"default\": 1,\n      triggerUpdate: false\n    },\n    pointsHoverPrecision: {\n      \"default\": 1,\n      triggerUpdate: false\n    },\n    hoverOrderComparator: {\n      triggerUpdate: false\n    },\n    // keep existing order by default\n    hoverFilter: {\n      \"default\": function _default() {\n        return true;\n      },\n      triggerUpdate: false\n    },\n    // exclude objects from interaction\n    tooltipContent: {\n      triggerUpdate: false\n    },\n    hoverDuringDrag: {\n      \"default\": false,\n      triggerUpdate: false\n    },\n    clickAfterDrag: {\n      \"default\": false,\n      triggerUpdate: false\n    },\n    onHover: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onRightClick: {\n      triggerUpdate: false\n    }\n  },\n  methods: {\n    tick: function tick(state) {\n      if (state.initialised) {\n        state.controls.enabled && state.controls.update && state.controls.update(Math.min(1, state.clock.getDelta())); // timedelta is required for fly controls\n\n        state.postProcessingComposer ? state.postProcessingComposer.render() // if using postprocessing, switch the output to it\n        : state.renderer.render(state.scene, state.camera);\n        state.extraRenderers.forEach(function (r) {\n          return r.render(state.scene, state.camera);\n        });\n        var now = +new Date();\n        if (state.enablePointerInteraction && now - state.lastRaycasterCheck >= state.pointerRaycasterThrottleMs) {\n          state.lastRaycasterCheck = now;\n          // Update tooltip and trigger onHover events\n          var topObject = null;\n          if (state.hoverDuringDrag || !state.isPointerDragging) {\n            var intersects = this.intersectingObjects(state.pointerPos.x, state.pointerPos.y);\n            state.hoverOrderComparator && intersects.sort(function (a, b) {\n              return state.hoverOrderComparator(a.object, b.object);\n            });\n            var topIntersect = intersects.find(function (d) {\n              return state.hoverFilter(d.object);\n            }) || null;\n            topObject = topIntersect ? topIntersect.object : null;\n            state.intersection = topIntersect || null;\n          }\n          if (topObject !== state.hoverObj) {\n            state.onHover(topObject, state.hoverObj, state.intersection);\n            state.tooltip.content(topObject ? accessorFn(state.tooltipContent)(topObject, state.intersection) || null : null);\n            state.hoverObj = topObject;\n          }\n        }\n        state.tweenGroup.update(); // update camera animation tweens\n      }\n      return this;\n    },\n    getPointerPos: function getPointerPos(state) {\n      var _state$pointerPos = state.pointerPos,\n        x = _state$pointerPos.x,\n        y = _state$pointerPos.y;\n      return {\n        x: x,\n        y: y\n      };\n    },\n    cameraPosition: function cameraPosition(state, position, lookAt, transitionDuration) {\n      var camera = state.camera;\n\n      // Setter\n      if (position && state.initialised) {\n        var finalPos = position;\n        var finalLookAt = lookAt || {\n          x: 0,\n          y: 0,\n          z: 0\n        };\n        if (!transitionDuration) {\n          // no animation\n          setCameraPos(finalPos);\n          setLookAt(finalLookAt);\n        } else {\n          var camPos = Object.assign({}, camera.position);\n          var camLookAt = getLookAt();\n          state.tweenGroup.add(new Tween(camPos).to(finalPos, transitionDuration).easing(Easing.Quadratic.Out).onUpdate(setCameraPos).start());\n\n          // Face direction in 1/3rd of time\n          state.tweenGroup.add(new Tween(camLookAt).to(finalLookAt, transitionDuration / 3).easing(Easing.Quadratic.Out).onUpdate(setLookAt).start());\n        }\n        return this;\n      }\n\n      // Getter\n      return Object.assign({}, camera.position, {\n        lookAt: getLookAt()\n      });\n\n      //\n\n      function setCameraPos(pos) {\n        var x = pos.x,\n          y = pos.y,\n          z = pos.z;\n        if (x !== undefined) camera.position.x = x;\n        if (y !== undefined) camera.position.y = y;\n        if (z !== undefined) camera.position.z = z;\n      }\n      function setLookAt(lookAt) {\n        var lookAtVect = new three.Vector3(lookAt.x, lookAt.y, lookAt.z);\n        if (state.controls.enabled && state.controls.target) {\n          state.controls.target = lookAtVect;\n        } else {\n          // Fly controls doesn't have target attribute\n          camera.lookAt(lookAtVect); // note: lookAt may be overridden by other controls in some cases\n        }\n      }\n      function getLookAt() {\n        return Object.assign(new three.Vector3(0, 0, -1e3).applyQuaternion(camera.quaternion).add(camera.position));\n      }\n    },\n    zoomToFit: function zoomToFit(state) {\n      var transitionDuration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var padding = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;\n      for (var _len = arguments.length, bboxArgs = new Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n        bboxArgs[_key - 3] = arguments[_key];\n      }\n      return this.fitToBbox(this.getBbox.apply(this, bboxArgs), transitionDuration, padding);\n    },\n    fitToBbox: function fitToBbox(state, bbox) {\n      var transitionDuration = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var padding = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 10;\n      // based on https://discourse.threejs.org/t/camera-zoom-to-fit-object/936/24\n      var camera = state.camera;\n      if (bbox) {\n        var center = new three.Vector3(0, 0, 0); // reset camera aim to center\n        var maxBoxSide = Math.max.apply(Math, _toConsumableArray(Object.entries(bbox).map(function (_ref) {\n          var _ref2 = _slicedToArray(_ref, 2),\n            coordType = _ref2[0],\n            coords = _ref2[1];\n          return Math.max.apply(Math, _toConsumableArray(coords.map(function (c) {\n            return Math.abs(center[coordType] - c);\n          })));\n        }))) * 2;\n\n        // find distance that fits whole bbox within padded fov\n        var paddedFov = (1 - padding * 2 / state.height) * camera.fov;\n        var fitHeightDistance = maxBoxSide / Math.atan(paddedFov * Math.PI / 180);\n        var fitWidthDistance = fitHeightDistance / camera.aspect;\n        var distance = Math.max(fitHeightDistance, fitWidthDistance);\n        if (distance > 0) {\n          var newCameraPosition = center.clone().sub(camera.position).normalize().multiplyScalar(-distance);\n          this.cameraPosition(newCameraPosition, center, transitionDuration);\n        }\n      }\n      return this;\n    },\n    getBbox: function getBbox(state) {\n      var objFilter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {\n        return true;\n      };\n      var box = new three.Box3(new three.Vector3(0, 0, 0), new three.Vector3(0, 0, 0));\n      var objs = state.objects.filter(objFilter);\n      if (!objs.length) return null;\n      objs.forEach(function (obj) {\n        return box.expandByObject(obj);\n      });\n\n      // extract global x,y,z min/max\n      return Object.assign.apply(Object, _toConsumableArray(['x', 'y', 'z'].map(function (c) {\n        return _defineProperty({}, c, [box.min[c], box.max[c]]);\n      })));\n    },\n    getScreenCoords: function getScreenCoords(state, x, y, z) {\n      var vec = new three.Vector3(x, y, z);\n      vec.project(this.camera()); // project to the camera plane\n      return {\n        // align relative pos to canvas dimensions\n        x: (vec.x + 1) * state.width / 2,\n        y: -(vec.y - 1) * state.height / 2\n      };\n    },\n    getSceneCoords: function getSceneCoords(state, screenX, screenY) {\n      var distance = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var relCoords = new three.Vector2(screenX / state.width * 2 - 1, -(screenY / state.height) * 2 + 1);\n      var raycaster = new three.Raycaster();\n      raycaster.setFromCamera(relCoords, state.camera);\n      return Object.assign({}, raycaster.ray.at(distance, new three.Vector3()));\n    },\n    intersectingObjects: function intersectingObjects(state, x, y) {\n      var relCoords = new three.Vector2(x / state.width * 2 - 1, -(y / state.height) * 2 + 1);\n      var raycaster = new three.Raycaster();\n      raycaster.params.Line.threshold = state.lineHoverPrecision; // set linePrecision\n      raycaster.params.Points.threshold = state.pointsHoverPrecision; // set pointsPrecision\n      raycaster.setFromCamera(relCoords, state.camera);\n      return raycaster.intersectObjects(state.objects, true);\n    },\n    renderer: function renderer(state) {\n      return state.renderer;\n    },\n    scene: function scene(state) {\n      return state.scene;\n    },\n    camera: function camera(state) {\n      return state.camera;\n    },\n    postProcessingComposer: function postProcessingComposer(state) {\n      return state.postProcessingComposer;\n    },\n    controls: function controls(state) {\n      return state.controls;\n    },\n    tbControls: function tbControls(state) {\n      return state.controls;\n    } // to be deprecated\n  },\n  stateInit: function stateInit() {\n    return {\n      scene: new three.Scene(),\n      camera: new three.PerspectiveCamera(),\n      clock: new three.Clock(),\n      tweenGroup: new Group(),\n      lastRaycasterCheck: 0\n    };\n  },\n  init: function init(domNode, state) {\n    var _ref4 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n      _ref4$controlType = _ref4.controlType,\n      controlType = _ref4$controlType === void 0 ? 'trackball' : _ref4$controlType,\n      _ref4$useWebGPU = _ref4.useWebGPU,\n      useWebGPU = _ref4$useWebGPU === void 0 ? false : _ref4$useWebGPU,\n      _ref4$rendererConfig = _ref4.rendererConfig,\n      rendererConfig = _ref4$rendererConfig === void 0 ? {} : _ref4$rendererConfig,\n      _ref4$extraRenderers = _ref4.extraRenderers,\n      extraRenderers = _ref4$extraRenderers === void 0 ? [] : _ref4$extraRenderers,\n      _ref4$waitForLoadComp = _ref4.waitForLoadComplete,\n      waitForLoadComplete = _ref4$waitForLoadComp === void 0 ? true : _ref4$waitForLoadComp;\n    // Wipe DOM\n    domNode.innerHTML = '';\n\n    // Add relative container\n    domNode.appendChild(state.container = document.createElement('div'));\n    state.container.className = 'scene-container';\n    state.container.style.position = 'relative';\n\n    // Add nav info section\n    state.container.appendChild(state.navInfo = document.createElement('div'));\n    state.navInfo.className = 'scene-nav-info';\n    state.navInfo.textContent = {\n      orbit: 'Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan',\n      trackball: 'Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan',\n      fly: 'WASD: move, R|F: up | down, Q|E: roll, up|down: pitch, left|right: yaw'\n    }[controlType] || '';\n    state.navInfo.style.display = state.showNavInfo ? null : 'none';\n\n    // Setup tooltip\n    state.tooltip = new Tooltip(state.container);\n\n    // Capture pointer coords on move or touchstart\n    state.pointerPos = new three.Vector2();\n    state.pointerPos.x = -2; // Initialize off canvas\n    state.pointerPos.y = -2;\n    ['pointermove', 'pointerdown'].forEach(function (evType) {\n      return state.container.addEventListener(evType, function (ev) {\n        // track click state\n        evType === 'pointerdown' && (state.isPointerPressed = true);\n\n        // detect point drag\n        !state.isPointerDragging && ev.type === 'pointermove' && (ev.pressure > 0 || state.isPointerPressed) // ev.pressure always 0 on Safari, so we used the isPointerPressed tracker\n        && (ev.pointerType === 'mouse' || ev.movementX === undefined || [ev.movementX, ev.movementY].some(function (m) {\n          return Math.abs(m) > 1;\n        })) // relax drag trigger sensitivity on non-mouse (touch/pen) events\n        && (state.isPointerDragging = true);\n        if (state.enablePointerInteraction) {\n          // update the pointer pos\n          var offset = getOffset(state.container);\n          state.pointerPos.x = ev.pageX - offset.left;\n          state.pointerPos.y = ev.pageY - offset.top;\n        }\n        function getOffset(el) {\n          var rect = el.getBoundingClientRect(),\n            scrollLeft = window.pageXOffset || document.documentElement.scrollLeft,\n            scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n          return {\n            top: rect.top + scrollTop,\n            left: rect.left + scrollLeft\n          };\n        }\n      }, {\n        passive: true\n      });\n    });\n\n    // Handle click events on objs\n    state.container.addEventListener('pointerup', function (ev) {\n      if (!state.isPointerPressed) return; // don't trigger click events if pointer is not pressed on the canvas\n\n      state.isPointerPressed = false;\n      if (state.isPointerDragging) {\n        state.isPointerDragging = false;\n        if (!state.clickAfterDrag) return; // don't trigger onClick after pointer drag (camera motion via controls)\n      }\n      requestAnimationFrame(function () {\n        // trigger click events asynchronously, to allow hoverObj to be set (on frame)\n        if (ev.button === 0) {\n          // left-click\n          state.onClick(state.hoverObj || null, ev, state.intersection); // trigger background clicks with null\n        }\n        if (ev.button === 2 && state.onRightClick) {\n          // right-click\n          state.onRightClick(state.hoverObj || null, ev, state.intersection);\n        }\n      });\n    }, {\n      passive: true,\n      capture: true\n    }); // use capture phase to prevent propagation blocking from controls (specifically for fly)\n\n    state.container.addEventListener('contextmenu', function (ev) {\n      if (state.onRightClick) ev.preventDefault(); // prevent default contextmenu behavior and allow pointerup to fire instead\n    });\n\n    // Setup renderer, camera and controls\n    state.renderer = new (useWebGPU ? WebGPURenderer : three.WebGLRenderer)(Object.assign({\n      antialias: true,\n      alpha: true\n    }, rendererConfig));\n    state.renderer.setPixelRatio(Math.min(2, window.devicePixelRatio)); // clamp device pixel ratio\n    state.container.appendChild(state.renderer.domElement);\n\n    // Setup extra renderers\n    state.extraRenderers = extraRenderers;\n    state.extraRenderers.forEach(function (r) {\n      // overlay them on top of main renderer\n      r.domElement.style.position = 'absolute';\n      r.domElement.style.top = '0px';\n      r.domElement.style.pointerEvents = 'none';\n      state.container.appendChild(r.domElement);\n    });\n\n    // configure post-processing composer\n    state.postProcessingComposer = new EffectComposer(state.renderer);\n    state.postProcessingComposer.addPass(new RenderPass(state.scene, state.camera)); // render scene as first pass\n\n    // configure controls\n    state.controls = new {\n      trackball: TrackballControls,\n      orbit: OrbitControls,\n      fly: FlyControls\n    }[controlType](state.camera, state.renderer.domElement);\n    if (controlType === 'fly') {\n      state.controls.movementSpeed = 300;\n      state.controls.rollSpeed = Math.PI / 6;\n      state.controls.dragToLook = true;\n    }\n    if (controlType === 'trackball' || controlType === 'orbit') {\n      state.controls.minDistance = 0.1;\n      state.controls.maxDistance = state.skyRadius;\n      state.controls.addEventListener('start', function () {\n        state.controlsEngaged = true;\n      });\n      state.controls.addEventListener('change', function () {\n        if (state.controlsEngaged) {\n          state.controlsDragging = true;\n        }\n      });\n      state.controls.addEventListener('end', function () {\n        state.controlsEngaged = false;\n        state.controlsDragging = false;\n      });\n    }\n    [state.renderer, state.postProcessingComposer].concat(_toConsumableArray(state.extraRenderers)).forEach(function (r) {\n      return r.setSize(state.width, state.height);\n    });\n    state.camera.aspect = state.width / state.height;\n    state.camera.updateProjectionMatrix();\n    state.camera.position.z = 1000;\n\n    // add sky\n    state.scene.add(state.skysphere = new three.Mesh());\n    state.skysphere.visible = false;\n    state.loadComplete = state.scene.visible = !waitForLoadComplete;\n    window.scene = state.scene;\n  },\n  update: function update(state, changedProps) {\n    // resize canvas\n    if (state.width && state.height && (changedProps.hasOwnProperty('width') || changedProps.hasOwnProperty('height'))) {\n      var _state$camera;\n      var w = state.width;\n      var h = state.height;\n      state.container.style.width = \"\".concat(w, \"px\");\n      state.container.style.height = \"\".concat(h, \"px\");\n      [state.renderer, state.postProcessingComposer].concat(_toConsumableArray(state.extraRenderers)).forEach(function (r) {\n        return r.setSize(w, h);\n      });\n      state.camera.aspect = w / h;\n      var o = state.viewOffset.slice(0, 2);\n      o.some(function (n) {\n        return n;\n      }) && (_state$camera = state.camera).setViewOffset.apply(_state$camera, [w, h].concat(_toConsumableArray(o), [w, h]));\n      state.camera.updateProjectionMatrix();\n    }\n    if (changedProps.hasOwnProperty('viewOffset')) {\n      var _state$camera2;\n      var _w = state.width;\n      var _h = state.height;\n      var _o = state.viewOffset.slice(0, 2);\n      _o.some(function (n) {\n        return n;\n      }) ? (_state$camera2 = state.camera).setViewOffset.apply(_state$camera2, [_w, _h].concat(_toConsumableArray(_o), [_w, _h])) : state.camera.clearViewOffset();\n    }\n    if (changedProps.hasOwnProperty('skyRadius') && state.skyRadius) {\n      state.controls.hasOwnProperty('maxDistance') && changedProps.skyRadius && (state.controls.maxDistance = Math.min(state.controls.maxDistance, state.skyRadius));\n      state.camera.far = state.skyRadius * 2.5;\n      state.camera.updateProjectionMatrix();\n      state.skysphere.geometry = new three.SphereGeometry(state.skyRadius);\n    }\n    if (changedProps.hasOwnProperty('backgroundColor')) {\n      var alpha = parseToRgb(state.backgroundColor).alpha;\n      if (alpha === undefined) alpha = 1;\n      state.renderer.setClearColor(new three.Color(opacify(1, state.backgroundColor)), alpha);\n    }\n    if (changedProps.hasOwnProperty('backgroundImageUrl')) {\n      if (!state.backgroundImageUrl) {\n        state.skysphere.visible = false;\n        state.skysphere.material.map = null;\n        !state.loadComplete && finishLoad();\n      } else {\n        new three.TextureLoader().load(state.backgroundImageUrl, function (texture) {\n          texture.colorSpace = three.SRGBColorSpace;\n          state.skysphere.material = new three.MeshBasicMaterial({\n            map: texture,\n            side: three.BackSide\n          });\n          state.skysphere.visible = true;\n\n          // triggered when background image finishes loading (asynchronously to allow 1 frame to load texture)\n          state.onBackgroundImageLoaded && setTimeout(state.onBackgroundImageLoaded);\n          !state.loadComplete && finishLoad();\n        });\n      }\n    }\n    changedProps.hasOwnProperty('showNavInfo') && (state.navInfo.style.display = state.showNavInfo ? null : 'none');\n    if (changedProps.hasOwnProperty('lights')) {\n      (changedProps.lights || []).forEach(function (light) {\n        return state.scene.remove(light);\n      }); // Clear the place\n      state.lights.forEach(function (light) {\n        return state.scene.add(light);\n      }); // Add to scene\n    }\n    if (changedProps.hasOwnProperty('objects')) {\n      (changedProps.objects || []).forEach(function (obj) {\n        return state.scene.remove(obj);\n      }); // Clear the place\n      state.objects.forEach(function (obj) {\n        return state.scene.add(obj);\n      }); // Add to scene\n    }\n\n    //\n\n    function finishLoad() {\n      state.loadComplete = state.scene.visible = true;\n    }\n  }\n});\n\nexport { threeRenderObjects as default };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}