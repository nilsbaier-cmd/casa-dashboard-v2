{"ast":null,"code":"import _objectSpread from\"/Users/Nils_1/Downloads/casa-react-v2/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useRef,useCallback}from'react';import{Maximize2,Download,X,Minimize2}from'lucide-react';/**\n * ChartContainer - Wrapper for charts/graphs with fullscreen and download capabilities\n * \n * @param {string} title - Chart title\n * @param {string} icon - Emoji icon for the chart\n * @param {React.ReactNode} children - Chart content\n * @param {string} downloadFileName - Name for downloaded PNG file\n * @param {object} translations - Translation object for labels\n */import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ChartContainer=_ref=>{let{title,icon='ðŸ“Š',children,downloadFileName='chart',translations={}}=_ref;const[isFullscreen,setIsFullscreen]=useState(false);const chartRef=useRef(null);const contentRef=useRef(null);const t=_objectSpread({fullscreen:translations.fullscreen||'Fullscreen',download:translations.download||'Download PNG',close:translations.close||'Close'},translations);// Download chart as PNG\nconst handleDownload=useCallback(async()=>{if(!contentRef.current)return;try{// Dynamically import html2canvas\nconst html2canvas=(await import('html2canvas')).default;const canvas=await html2canvas(contentRef.current,{backgroundColor:'#ffffff',scale:2,// Higher resolution\nlogging:false,useCORS:true});const link=document.createElement('a');link.download=\"\".concat(downloadFileName,\"-\").concat(new Date().toISOString().split('T')[0],\".png\");link.href=canvas.toDataURL('image/png');link.click();}catch(error){console.error('Failed to download chart:',error);// Fallback: alert user\nalert('Download failed. Please try again or take a screenshot.');}},[downloadFileName]);// Toggle fullscreen\nconst toggleFullscreen=()=>{setIsFullscreen(!isFullscreen);};// Handle escape key to close fullscreen\nReact.useEffect(()=>{const handleEscape=e=>{if(e.key==='Escape'&&isFullscreen){setIsFullscreen(false);}};document.addEventListener('keydown',handleEscape);return()=>document.removeEventListener('keydown',handleEscape);},[isFullscreen]);// Prevent body scroll when fullscreen\nReact.useEffect(()=>{if(isFullscreen){document.body.style.overflow='hidden';}else{document.body.style.overflow='';}return()=>{document.body.style.overflow='';};},[isFullscreen]);const ChartContent=()=>/*#__PURE__*/_jsx(\"div\",{ref:contentRef,className:\"chart-content\",children:children});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chart-container\",ref:chartRef,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chart-header\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"chart-title\",children:[/*#__PURE__*/_jsx(\"span\",{children:icon}),title]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-controls\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"chart-btn\",onClick:handleDownload,title:t.download,\"aria-label\":t.download,children:/*#__PURE__*/_jsx(Download,{size:16})}),/*#__PURE__*/_jsx(\"button\",{className:\"chart-btn\",onClick:toggleFullscreen,title:t.fullscreen,\"aria-label\":t.fullscreen,children:/*#__PURE__*/_jsx(Maximize2,{size:16})})]})]}),/*#__PURE__*/_jsx(ChartContent,{})]}),isFullscreen&&/*#__PURE__*/_jsx(\"div\",{className:\"fullscreen-overlay\",onClick:toggleFullscreen,children:/*#__PURE__*/_jsxs(\"div\",{className:\"fullscreen-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fullscreen-header\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"chart-title\",children:[/*#__PURE__*/_jsx(\"span\",{children:icon}),title]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-controls\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"chart-btn\",onClick:handleDownload,title:t.download,children:/*#__PURE__*/_jsx(Download,{size:16})}),/*#__PURE__*/_jsx(\"button\",{className:\"fullscreen-close\",onClick:toggleFullscreen,title:t.close,children:/*#__PURE__*/_jsx(X,{size:20})})]})]}),/*#__PURE__*/_jsx(\"div\",{ref:contentRef,className:\"chart-content\",style:{minHeight:'500px'},children:children})]})})]});};export default ChartContainer;","map":{"version":3,"names":["React","useState","useRef","useCallback","Maximize2","Download","X","Minimize2","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ChartContainer","_ref","title","icon","children","downloadFileName","translations","isFullscreen","setIsFullscreen","chartRef","contentRef","t","_objectSpread","fullscreen","download","close","handleDownload","current","html2canvas","default","canvas","backgroundColor","scale","logging","useCORS","link","document","createElement","concat","Date","toISOString","split","href","toDataURL","click","error","console","alert","toggleFullscreen","useEffect","handleEscape","e","key","addEventListener","removeEventListener","body","style","overflow","ChartContent","ref","className","onClick","size","stopPropagation","minHeight"],"sources":["/Users/Nils_1/Downloads/casa-react-v2/src/components/ChartContainer.jsx"],"sourcesContent":["import React, { useState, useRef, useCallback } from 'react';\nimport { Maximize2, Download, X, Minimize2 } from 'lucide-react';\n\n/**\n * ChartContainer - Wrapper for charts/graphs with fullscreen and download capabilities\n * \n * @param {string} title - Chart title\n * @param {string} icon - Emoji icon for the chart\n * @param {React.ReactNode} children - Chart content\n * @param {string} downloadFileName - Name for downloaded PNG file\n * @param {object} translations - Translation object for labels\n */\nconst ChartContainer = ({ \n  title, \n  icon = 'ðŸ“Š', \n  children, \n  downloadFileName = 'chart',\n  translations = {}\n}) => {\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const chartRef = useRef(null);\n  const contentRef = useRef(null);\n\n  const t = {\n    fullscreen: translations.fullscreen || 'Fullscreen',\n    download: translations.download || 'Download PNG',\n    close: translations.close || 'Close',\n    ...translations\n  };\n\n  // Download chart as PNG\n  const handleDownload = useCallback(async () => {\n    if (!contentRef.current) return;\n\n    try {\n      // Dynamically import html2canvas\n      const html2canvas = (await import('html2canvas')).default;\n      \n      const canvas = await html2canvas(contentRef.current, {\n        backgroundColor: '#ffffff',\n        scale: 2, // Higher resolution\n        logging: false,\n        useCORS: true,\n      });\n      \n      const link = document.createElement('a');\n      link.download = `${downloadFileName}-${new Date().toISOString().split('T')[0]}.png`;\n      link.href = canvas.toDataURL('image/png');\n      link.click();\n    } catch (error) {\n      console.error('Failed to download chart:', error);\n      // Fallback: alert user\n      alert('Download failed. Please try again or take a screenshot.');\n    }\n  }, [downloadFileName]);\n\n  // Toggle fullscreen\n  const toggleFullscreen = () => {\n    setIsFullscreen(!isFullscreen);\n  };\n\n  // Handle escape key to close fullscreen\n  React.useEffect(() => {\n    const handleEscape = (e) => {\n      if (e.key === 'Escape' && isFullscreen) {\n        setIsFullscreen(false);\n      }\n    };\n    \n    document.addEventListener('keydown', handleEscape);\n    return () => document.removeEventListener('keydown', handleEscape);\n  }, [isFullscreen]);\n\n  // Prevent body scroll when fullscreen\n  React.useEffect(() => {\n    if (isFullscreen) {\n      document.body.style.overflow = 'hidden';\n    } else {\n      document.body.style.overflow = '';\n    }\n    return () => {\n      document.body.style.overflow = '';\n    };\n  }, [isFullscreen]);\n\n  const ChartContent = () => (\n    <div ref={contentRef} className=\"chart-content\">\n      {children}\n    </div>\n  );\n\n  return (\n    <>\n      {/* Normal View */}\n      <div className=\"chart-container\" ref={chartRef}>\n        <div className=\"chart-header\">\n          <h3 className=\"chart-title\">\n            <span>{icon}</span>\n            {title}\n          </h3>\n          <div className=\"chart-controls\">\n            <button \n              className=\"chart-btn\" \n              onClick={handleDownload}\n              title={t.download}\n              aria-label={t.download}\n            >\n              <Download size={16} />\n            </button>\n            <button \n              className=\"chart-btn\" \n              onClick={toggleFullscreen}\n              title={t.fullscreen}\n              aria-label={t.fullscreen}\n            >\n              <Maximize2 size={16} />\n            </button>\n          </div>\n        </div>\n        <ChartContent />\n      </div>\n\n      {/* Fullscreen Modal */}\n      {isFullscreen && (\n        <div className=\"fullscreen-overlay\" onClick={toggleFullscreen}>\n          <div \n            className=\"fullscreen-content\" \n            onClick={(e) => e.stopPropagation()}\n          >\n            <div className=\"fullscreen-header\">\n              <h3 className=\"chart-title\">\n                <span>{icon}</span>\n                {title}\n              </h3>\n              <div className=\"chart-controls\">\n                <button \n                  className=\"chart-btn\" \n                  onClick={handleDownload}\n                  title={t.download}\n                >\n                  <Download size={16} />\n                </button>\n                <button \n                  className=\"fullscreen-close\" \n                  onClick={toggleFullscreen}\n                  title={t.close}\n                >\n                  <X size={20} />\n                </button>\n              </div>\n            </div>\n            <div ref={contentRef} className=\"chart-content\" style={{ minHeight: '500px' }}>\n              {children}\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default ChartContainer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}